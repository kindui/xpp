/*human|2014-09-11*/
!function(a){function b(a){function c(){var b=[].slice.call(arguments),d=function(a){a.prototype.superclass&&d(a.prototype.superclass.constructor),a.prototype._init.apply(this,b)}.bind(this);d(a),c.prototype._init&&c.prototype._init.apply(this,b)}var d=function(){};return d.prototype=a.prototype,c.prototype=new d,c.prototype.constructor=c,c.prototype.superclass=a.prototype,c.extend=function(a){var c=b(this);for(var d in a)c.prototype[d]=a[d];return a.name?g.widgets[a.name]=c:g.widgets["widget-"+UUID++]=c,c},c}function c(){var a;return a=this instanceof Element?this:this.el}function d(a,b){for(var c in b)a[c]=b[c]}function e(){}function f(){}var g=a.X,h={},i=1,j=1;h.apps={},h.widgets={},h.version="2.0.1",h.release="2014-09-11",h.author="human",h.contact="halfthink@163.com";var k={$:function(a,b){return 1==a.nodeType?a:b?b.querySelector(a)||document.querySelector(a,b):document.querySelector(a)},$$:function(a,b){var c;return c=b?b.querySelectorAll(a)||document.querySelectorAll(a,b):document.querySelectorAll(a),[].slice.call(c)},df:function(a){var b=document.createElement("div");if(b.innerHTML=a,1==b.children.length)return b.firstElementChild;var c=document.createDocumentFragment();return[].slice.call(b.children).forEach(function(a){c.appendChild(a)}),c},gen:function(a){return a=a||"W",a+String(Math.random()).slice(2).substring(0,16)},getTime:function(){return+new Date},bindThis:function(a){return"string"==typeof a?this[a]=this[a].bind(this):Array.isArray(a)&&a.forEach(function(a){this[a]=this[a].bind(this)}.bind(this)),this},addStyle:function(a,b){b=b||document;var c=b.createElement("style");c.type="text/css",c.appendChild(b.createTextNode(a)),b.getElementsByTagName("HEAD")[0].appendChild(c)},mix:d,clone:function(a){var b;if("object"==typeof a)if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b.push(arguments.callee(a[c]))}else{if("[object Date]"==Object.prototype.toString.call(a))return new Date(a.toString());b={};for(var e in a)b[e]=arguments.callee(a[e])}else b=a;return b},detect:function(){var b=navigator.userAgent.toLowerCase(),c={isIphone:!1,isIpad:!1,isIpod:!1,isSafari:!1,isAndroid:!1,isWindowsPhone:!1,isMobile:!1,isChrome:!1,isTouchDevice:!1};return/Android|webOS|iPhone|Windows Phone|iPod|BlackBerry|SymbianOS|Mobile/i.test(b)&&(c.isMobile=!0),/iphone/.test(b)&&(c.isIphone=!0),/ipad/.test(b)&&(c.isIpad=!0),/ipod/.test(b)&&(c.isIpod=!0),/safari/.test(b)&&!/chrome/.test(b)&&(c.isSafari=!0),/android/.test(b)&&(c.isAndroid=!0),/windows phone/.test(b)&&(c.isWindowsPhone=!0),/chrome/.test(b)&&(c.isChrome=!0),c.isTouchDevice="ontouchstart"in a,c}(),vendor:function(){var a=document.createElement("div");return void 0!=a.style.webkitTransform?"webkit":void 0!=a.style.MozTransform?"moz":""}(),urlObj:function(){var a=location.href,b={};return-1!=a.indexOf("?")&&a.split("?")[1].split("&").forEach(function(a){var c=a.split("="),d=c[0],e=decodeURIComponent(decodeURI(c[1]));b[d]=e}),b},dateFormat:function(a,b){void 0==b&&"string"==typeof a&&(b=a,a=new Date);var c={"M+":a.getMonth()+1,"D+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(Y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},post:function(a,b,c,d){"function"==typeof b&&(c=b,b={}),d=d||{},d.url=a,d.data=b,d.method="post",d.type=d.type||"json",d.success=c,this.ajax(d)},get:function(a,b,c){c=c||{},c.url=a,c.type=c.type||"json",c.success=b,this.ajax(c)},ajax:function(a){var b={url:null,timeout:this.ajaxConfig.timeout,timeoutCb:this.ajaxConfig.timeoutCb,jsonError:this.ajaxConfig.jsonError,method:"get",type:"text",beforeResponse:this.ajaxConfig.beforeResponse,afterResponse:this.ajaxConfig.afterResponse,success:null,error:null};a=a||{};for(var c in b)a[c]=a[c]||b[c];a.asyn=a.asyn===!1?!1:!0,a.timeoutCb&&(a.timeoutCb=a.timeoutCb.bind(this)),a.success&&(a.success=a.success.bind(this)),a.error&&(a.error=a.error.bind(this));var d="post"==a.method.toLowerCase();try{var e=new XMLHttpRequest}catch(f){a.error&&a.error("Create Xhr error!")}if(e.onload=function(){var b,c=e.status;if(c>=200&&400>c)switch(clearTimeout(a.timeout),a.type){case"text":a.success(e.responseText);break;case"json":try{b=JSON.parse(e.responseText)}catch(d){a.jsonError()}var f=a.beforeResponse&&a.beforeResponse(b);if(f===!1)return;a.success(b),a.afterResponse&&a.afterResponse(b)}},e.onerror=function(){a.error&&a.error("Xhr onerror trigger!")},d){var g=[];for(var h in a.data)g.push(h+"="+a.data[h]);a.data=g.join("&")}return a.timeout&&(a.timeout=setTimeout(function(){a.timeoutCb(),e.onreadystatechange=null,e.abort()},1e3*a.timeout)),e.open(a.method,a.url,a.asyn),d&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(d?a.data:void 0),this},asynJSON:function(b,c,d,e){var f=document.createElement("script"),g=document.getElementsByTagName("head")[0];a[c]=function(b){a[c]=void 0;try{delete a[c]}catch(e){}d(b),g&&setTimeout(function(){g.removeChild(f)},5)},f.charset=e||"utf-8",f.src=b,g.appendChild(f)},on:function(a,b,c){a._events=a._events||{},a._events[b]||(a._events[b]={});var d=c.bind(this);return a._events[b][c]=d,a.addEventListener(b,d,!1),this},delegate:function(a,b,c,d){var e=function(c){for(var e=this.$$(b,a),f=c.target,g=c.currentTarget;-1==e.indexOf(f)&&g.contains(f)&&g!==f;)f=f.parentNode;return g==f?void c.stopPropagation():(c.currentEl=f,d.call(this,c),void c.stopPropagation())}.bind(this);a.addEventListener(c,e,!1)},off:function(a,b,c){var d=a._events&&a._events[b];if(!d)return this;var e;for(var f in d)f==c&&(e=d[f]);return a.removeEventListener(b,e,!1),delete a._events[b],this},trigger:function(a,b){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)},getData:function(a){var b=localStorage.getItem(a);try{return b=JSON.parse(b)}catch(c){return b}},setData:function(a,b){if("object"==typeof b)try{b=JSON.stringify(b)}catch(c){console.log("xApp.js setData error")}localStorage.setItem(a,String(b))},show:function(){c.bind(this)().style.display="block"},hide:function(){c.bind(this)().style.display="none"},css:function(b,d){var e=c.bind(this)();{if("object"!=typeof b)return void 0==d?a.getComputedStyle(e,null)[b]:(e.style[b]=d,this);for(var f in b)e.style[f]=b[f]}},tpl2html:function(a,b){var c=new Function("obj","var p=[];with(obj){p.push('"+a.replace(/\'/g,"\\'").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('")+"');}return p.join('');");return c(b)},tpl2obj:function(a,b){"string"==typeof a&&(a=this.$(a));for(var c in b)this.$(c,a).innerHTML=b[c];return this},tpl2replace:function(a,b){var c;for(var d in b)c=new RegExp("{"+d+"}","g"),a=a.replace(c,b[d]);return a}};e.prototype={constructor:e,el:null,setup:!1,_init:function(a){a=a||{};var b=a.el;if(void 0==b?this.setup=!0:"string"==typeof b?(this.elStr=b,this.el=this.$(b)):b.nodeType&&(this.el=b),this.opt)for(var c in this.opt)this[c]=a[c]||this.opt[c]}},d(e.prototype,k),f.prototype={constructor:f,ajaxConfig:{jsonError:function(){alert("Server json format error")},timeoutCb:function(){alert("Server response timeout")},timeout:!1,beforeResponse:null,afterResponse:null},_init:function(){for(var a in this.el)this[a]=this.$(this.el[a]);for(var a in this.els)this[a]=this.$$(this.els[a]);for(var a in this.tpl)this.tpl[a]=this.$(this.tpl[a]).innerHTML;for(var a in this.superclass.ajaxConfig)this.ajaxConfig[a]=this.ajaxConfig[a]||this.superclass.ajaxConfig[a]}},d(f.prototype,k),h.app=function(a){var c=b(f);for(var d in a)c.prototype[d]=a[d];var e=h.apps["app-"+i++]=new c;return e},h.add=function(a){var c=b(e);for(var d in a)c.prototype[d]=a[d];return a._classInit&&a._classInit.call(c.prototype),1==a.single&&(c=new c),a.name?h.widgets[a.name]=c:h.widgets["widget-"+j++]=c,c},h.base=k,a.X=h}(window);